{% extends "layout.html" %}

{% block content %}
  <section class="search-hero" aria-labelledby="search-title">
    <div class="search-wrap">
      <form id="search-form" class="search-hero-form" method="post" action="/search" role="search">
        <div class="search-control" role="group" aria-label="Search control">
          <input id="q" class="search-input" name="q" type="search" placeholder="Paste a ServiceNow question here..." value="{{ query|default('') }}" autocomplete="off" />
          <button id="search-btn" class="search-btn" type="submit" aria-label="Search">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span>Search</span>
          </button>
        </div>
      </form>

      {% if error %}
        <div class="error">{{ error }}</div>
      {% endif %}

     
    </div>
  </section>

  <section class="results-area">
    <div class="results-meta">Results</div>
    <div id="results">
      {% if results is defined and results|length > 0 %}
        <div class="results-grid">
          {% for r in results %}
            <article class="card result">
              <div class="score-badge">{{ r.score }}</div>
              <h3><a href="{{ r.url }}" target="_blank" rel="noopener">{{ r.title }}</a></h3>
              <p class="snippet">{{ r.snippet }}</p>
              <a class="source" href="{{ r.url }}" target="_blank" rel="noopener">Source</a>
            </article>
          {% endfor %}
        </div>
      {% else %}
        <div class="empty-card" role="status">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="#9aa6b2" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="#9aa6b2" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <h3>No similar ServiceNow questions found</h3>
          <p>Try adjusting your question or ask a new one.</p>
        </div>
      {% endif %}
    </div>
  </section>

{% endblock %}
              <p>Try adjusting your question or ask a new one.</p>

